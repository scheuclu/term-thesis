\documentclass{standalone}
\usepackage{tikz}
\usetikzlibrary{positioning}
\usetikzlibrary{calc}
\def\mainpath{../../}
\def\tikzpath{./}
\def\studypath{/home/lukas/Desktop/SA_Thesis/studies}

\usepackage{import}

\usepackage{pgfplots}
\usepackage{pgfplotstable}
\usepgfplotslibrary{groupplots}

\usepackage[outline]{contour}

\input{\mainpath/colordefinitions}
\begin{document}






\begin{tikzpicture}[every axis/.style={
%xmax=26,%
xmin=-0.5,%
ymin=0,%
ymax=20,
%ymax=40,%
ylabel={ search dir},%
xlabel={ iterations},%
bar width=1.5pt,
%xtick={0,1,...,26}
}]

\pgfplotstableread[col sep=comma]{\studypath/2016-08-25_StudyContractfac/data/contract2tau_chaco.txt}\loadedtable

 \begin{groupplot}[
group style = {group size = 1 by 4, horizontal sep=2.0cm, vertical sep=1.5cm},
height = 5cm,
width = 14cm,
]



\nextgroupplot[ybar, legend style={at={(0.99,0.9)}, anchor=north east,legend columns=-1}, ylabel={\# serach directions}, xlabel={\# iteration}, nodes near coords align={vertical}, cycle list name=linelist]
\pgfplotsset{cycle list shift=2};
\addplot+[fill, opacity=1.0, thick] table [skip first n=0,x expr=\coordindex, x index=0, y index=0, col sep=comma] {\studypath/2016-08-22_HeterogenityType/data/numsdir_cboard_Aeye_fetis_tau100.txt};
\addplot+[fill, opacity=1.0, thick] table [skip first n=0,x expr=\coordindex, x index=0, y index=0, col sep=comma] {\studypath/2016-08-22_HeterogenityType/data/numsdir_cboard_Aeye_fetias_tau100.txt};
\addplot+[fill, opacity=1.0, thick] table [skip first n=0,x expr=\coordindex,  x index=0, y index=0, col sep=comma] {\studypath/2016-08-22_HeterogenityType/data/numsdir_cboard_Aeye_fetifas_tau10.txt};
\node[anchor=north east] at (rel axis cs:1,1) {\contour{white}{$\frac{E_{stiff}}{E_{soft}}=10$, $\rho_{AS}=0.999\rightarrow\tau_{AS}=0.85$, no scaling}};




\nextgroupplot[ybar, legend style={at={(0.5,-0.35)}, anchor=north,legend columns=-1}, ylabel={\# serach directions}, xlabel={\# iteration}, nodes near coords align={vertical}, cycle list name=linelist]
\pgfplotsset{cycle list shift=2};
\addplot+[fill, opacity=1.0, thick] table [skip first n=0,x expr=\coordindex, x index=0, y index=0, col sep=comma] {\studypath/2016-08-22_HeterogenityType/data/numsdir_cboard_Aeye_fetis_tau100.txt};
\addplot+[fill, opacity=1.0, thick] table [skip first n=0,x expr=\coordindex, x index=0, y index=0, col sep=comma] {\studypath/2016-08-22_HeterogenityType/data/numsdir_cboard_Aeye_fetias_tau100.txt};
\addplot+[fill, opacity=1.0, thick] table [skip first n=0,x expr=\coordindex,  x index=0, y index=0, col sep=comma] {\studypath/2016-08-22_HeterogenityType/data/numsdir_cboard_Aeye_fetifas_tau1000.txt};
\node[anchor=north east] at (rel axis cs:1,1) {\contour{white}{$\frac{E_{stiff}}{E_{soft}}=1000$, $\rho_{AS}=0.999\rightarrow\tau_{AS}=0.375$, no scaling}};




\nextgroupplot[ybar, legend style={at={(0.99,0.9)}, anchor=north east,legend columns=-1}, ylabel={\# serach directions}, xlabel={\# iteration}, nodes near coords align={vertical}, cycle list name=linelist]
\pgfplotsset{cycle list shift=2};
\addplot+[fill, opacity=1.0, thick] table [skip first n=0,x expr=\coordindex, x index=0, y index=0, col sep=comma] {\studypath/2016-08-22_HeterogenityType/data/numsdir_cboard_Aprecond_fetis_tau100.txt};
\addplot+[fill, opacity=1.0, thick] table [skip first n=0,x expr=\coordindex, x index=0, y index=0, col sep=comma] {\studypath/2016-08-22_HeterogenityType/data/numsdir_cboard_Aprecond_fetias_tau100.txt};
\addplot+[fill, opacity=1.0, thick] table [skip first n=0,x expr=\coordindex,  x index=0, y index=0, col sep=comma] {\studypath/2016-08-22_HeterogenityType/data/numsdir_cboard_Aprecond_fetifas_tau10.txt};
\node[anchor=north east] at (rel axis cs:1,1) {\contour{white}{$\frac{E_{stiff}}{E_{soft}}=10$, $\rho_{AS}=0.999\rightarrow\tau_{AS}=0.85$, K-scaling}};





\nextgroupplot[ybar, legend style={at={(0.5,-0.35)}, anchor=north,legend columns=-1}, ylabel={\# serach directions}, xlabel={\# iteration}, nodes near coords align={vertical}, cycle list name=linelist]
\pgfplotsset{cycle list shift=2};
\addplot+[fill, opacity=1.0, thick] table [skip first n=0,x expr=\coordindex, x index=0, y index=0, col sep=comma] {\studypath/2016-08-22_HeterogenityType/data/numsdir_cboard_Aprecond_fetis_tau100.txt};
\addplot+[fill, opacity=1.0, thick] table [skip first n=0,x expr=\coordindex, x index=0, y index=0, col sep=comma] {\studypath/2016-08-22_HeterogenityType/data/numsdir_cboard_Aprecond_fetias_tau100.txt};
\addplot+[fill, opacity=1.0, thick] table [skip first n=0,x expr=\coordindex,  x index=0, y index=0, col sep=comma] {\studypath/2016-08-22_HeterogenityType/data/numsdir_cboard_Aprecond_fetifas_tau1000.txt};
\node[anchor=north east] at (rel axis cs:1,1) {\contour{white}{$\frac{E_{stiff}}{E_{soft}}=1000$, $\rho_{AS}=0.999\rightarrow\tau_{AS}=0.375$, K-scaling}};

\legend{FETI-S,FETI-AS,FETI-FAS}


\end{groupplot}
\end{tikzpicture}


%/home/lukas/Desktop/SA_Thesis/studies/2016-08-22_HeterogenityType/data/numsdir_cboard_Aprecond_fetias_tau1000.txt

\end{document}